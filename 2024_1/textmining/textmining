import re
import ujson
from konlpy.tag import Komoran

def split_sentences(text):
  all_sentences = []
  lines = [line for line in text.strip().splitlines()if line.strip]

  for line in lines:
    sentences=re.split("(?<=[.?!]) ", line)
    all_sentences += sentences

  return all_sentences

def get_morph_anal(analyzer, text):
  sent_morph_anals = []
  sentences = split_sentences(text)

  for sentence in sentences:
    sent_morph_anal = analyzer.pos(sentence)
    sent_morph_anals.append(sent_morph_anal)

  return sent_morph_anals

def main():
  my_text = """ <벌레이야기>

1
아내는 알암이의 돌연스런 가출이 유괴에 의한 실종으로 확실시되고 난 다음에도 한동안은 악착스럽게 자신을 잘 견뎌 나가고 있었다.
그것은 아이가 지난해 5월 초, 어느 날 알암이가 학교에서 돌아올 시각이 훨씬 지나도록 귀가를 안 했다.
"""

  komoran = Komoran()
  ma_res = get_morph_anal(komoran, my_text)
  print(ma_res)

main()
